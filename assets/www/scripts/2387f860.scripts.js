"use strict";angular.module("scoreliveApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/detail",{templateUrl:"views/detail.html",controller:"MainCtrl"}).when("/change",{templateUrl:"views/companyDetail.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]);var myApp=angular.module("scoreliveApp");myApp.service("Matchs",function(){var a={matchs:[{league_name:"亚冠杯",match_home_rank:"2",match_home_name:"丰田",match_visiting_rank:"3",match_visiting_name:"恒大",date:"04-10",time:"16:30",first_win:"1.96",first_draw:"3.2",first_lose:"3.6",last_win:"1.89",last_draw:"3.97",last_lose:"3.4",first_returnRate:"90.2",last_returnRate:"90.19",matchId:2},{league_name:"亚冠杯",match_home_rank:"4",match_home_name:"丰田",match_visiting_rank:"3",match_visiting_name:"恒大",date:"04-10",time:"16:30",first_win:"1.96",first_draw:"3.2",first_lose:"3.6",last_win:"1.89",last_draw:"3.97",last_lose:"3.4",first_returnRate:"90.2",last_returnRate:"90.19",matchId:3}],match:{league_name:"亚冠杯",match_home_rank:"2",match_home_name:"丰田",match_visiting_rank:"3",match_visiting_name:"恒大",date:"04-10",time:"16:30",matchId:2,companys:[{company_name:"澳门",first_win:"1.96",first_draw:"3.2",first_lose:"3.6",last_win:"1.89",last_draw:"3.97",last_lose:"3.4",first_returnRate:"90.2",last_returnRate:"90.19"}]},matchDetail:{league_name:"亚冠杯",match_home_rank:"2",match_home_name:"丰田",match_visiting_rank:"3",match_visiting_name:"恒大",date:"04-10",time:"16:30",company_name:"澳门",matchId:2,odds:[{win:"1.96",draw:"3.2",lose:"3.6",oddDate:"04-15"}]}};return a}),myApp.factory("ajax",["$http",function(a){var b=function(a,b){a.matchs=b},c=function(a,b){var c={},d=[],e={};b.forEach(function(b){e={},a.match.league_name=b.league_name,a.match.match_home_rank=b.match_home_rank,a.match.match_home_name=b.match_home_name,a.match.match_visiting_name=b.match_visiting_name,a.match.match_visiting_rank=b.match_visiting_rank,a.match.matchId=b.matchId,e.company_id=b.company_id,e.company_name=b.company_name,e.first_draw=b.first_draw,e.first_lose=b.first_lose,e.first_returnRate=b.first_returnRate,e.first_win=b.first_win,e.last_draw=b.last_draw,e.last_lose=b.last_lose,e.last_returnRate=b.last_returnRate,e.last_win=b.last_win,d.push(e)}),c.companys=d,a.match.companys=c.companys},d=function(a,b){a.matchDetail.odds=b,a.matchDetail.league_name=a.match.league_name,a.matchDetail.match_home_rank=a.match.match_home_rank,a.matchDetail.match_home_name=a.match.match_home_name,a.matchDetail.match_visiting_name=a.match.match_visiting_name,a.matchDetail.match_visiting_rank=a.match.match_visiting_rank,a.matchDetail.matchId=a.match.matchId};return function(e,f,g){a({method:"GET",url:"/ScoreLive/"+e.url,cache:!1}).then(function(a){switch(g){case 1:b(f,a.data);break;case 2:c(f,a.data);break;case 3:d(f,a.data)}})}}]),myApp.controller("MainCtrl",["$scope","Matchs","ajax",function(a,b,c){a.matchs=b.matchs,a.selectOptions=[{value:"欧赔",key:"odds"},{value:"亚盘",key:"hdc"},{value:"大小球",key:"gl"}];var d={url:"IndexRealLayerOneService?type=odds&matchid=1&num=2&date=20140424"};a.selectOption=a.selectOptions[0],c(d,a,1),a.select=function(){d.url="IndexRealLayerOneService?type="+a.selectOption.key+"&matchid=1&num=2&date=20140424",c(d,a,1)},a.goToMatch=function(){d.url="IndexRealLayerTwoService?type=odds&matchid=1&num=2",c(d,a,2)},a.match=b.match,a.goToDetail=function(){var b={url:"IndexRealLayerThirdService?type=odds&matchid=5&companyid=2"};c(b,a,3)},a.matchDetail=b.matchDetail}]);